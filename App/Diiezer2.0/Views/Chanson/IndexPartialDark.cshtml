
@model IEnumerable<Diiezer2._0.Models.vmChansonInformation>

@{
    ViewBag.Title = "IndexPartial";
}

<div class="container">
    <table class="table border0 table-hover table-dark">
        <tr>
            <th>
                Titre
            </th>
            <th>
                Durée
            </th>
            <th>
                Artiste
            </th>
            <th>
                Album
            </th>
            <th>
                Note
            </th>
            <th>
                Prix
            </th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <a href="/Chanson/Details/@item.idChanson">@item.titre</a>
                </td>
                <td>
                    @{ var duree = (item.durée / 60).ToString() + " min " + (item.durée % 60).ToString();}
                    @duree
                </td>
                <td>
                    @Html.ActionLink(item.artiste, "../Artiste/Details", new { id = item.idArtiste })
                </td>
                <td>
                    @Html.ActionLink(item.album, "../Album/Details", new { id = item.idAlbum })
                </td>
                <td class="small-td">
                    @{
                        string idnote = "note" + item.idChanson;
                        <div id=@idnote>
                            @{
                                Html.RenderAction("partialNote", "Note", new { idChanson = item.idChanson, note = item.note });
                            }
                        </div>
                    }
                </td>
                <td class="small-td">
                    @{
                        if (item.isInPanier)
                        {
                            <button type="button" class="btn btn-danger btn-achat">Dans le Panier</button>
                        }
                        else if (item.isExtract)
                        {
                            var url = HttpContext.Current.Request.Url.AbsoluteUri;
                            var s = "Ajouter " + item.titre + " au panier ? ";
                            var confirm = "return confirm(" + "\'" + s + "\'" + ");";
                            @Html.ActionLink(item.prix + "€", "../Panier/AjoutChansonPanier", new { idChanson = item.idChanson, url = url }, new { onclick = confirm, @class = "btn btn-danger btn-achat" })
                        }
                        else
                        {
                            <a href=@item.musique download>
                                <img src="~/Content/img/download.png" class="img-responsive btn-dl">
                            </a>
                        }
                    }
                </td>

            </tr>
                        }
    </table>
</div>

